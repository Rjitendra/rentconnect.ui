<mat-form-field [appearance]="appearance" class="ng-textarea-field" [class.ng-textarea-error]="hasValidationError">
  @if (label) {
    <mat-label>
      <ng-label [label]="label" [required]="required" [toolTip]="toolTip" />
    </mat-label>
  }
  
  @if (prefixIcon) {
    <mat-icon matPrefix>{{ prefixIcon }}</mat-icon>
  }
  
  <textarea
    matInput
    [value]="value || ''"
    [placeholder]="placeholder"
    [disabled]="disabled"
    [required]="required"
    [readonly]="readonly"
    [rows]="rows"
    [cols]="cols"
    [attr.maxlength]="maxLength"
    [id]="uniqueId"
    [attr.aria-label]="ariaLabel"
    (input)="onInput($event)"
    (blur)="onBlur()"
    (focus)="onFocus($event)"
    cdkTextareaAutosize
    [cdkAutosizeMinRows]="minRows"
    [cdkAutosizeMaxRows]="maxRows">
  </textarea>
  
  @if (suffixIcon) {
    <mat-icon matSuffix>{{ suffixIcon }}</mat-icon>
  }
  
  @if (clarifyText) {
    <div matTextSuffix>
      <ng-clarify-text 
        [clarifyText]="clarifyText" 
        [isIconDisabled]="disabled" />
    </div>
  }
  
  @if (hasValidationError && displayErrorMessage) {
    <mat-error>{{ displayErrorMessage }}</mat-error>
  }
  
  @if (showCharacterCount && maxLength) {
    <mat-hint align="end">
      {{ (value || '').length }} / {{ maxLength }}
    </mat-hint>
  } @else if (hint) {
    <mat-hint>{{ hint }}</mat-hint>
  }
</mat-form-field>